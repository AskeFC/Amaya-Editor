<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>
Editing mathematics</title>
<meta name="GENERATOR" content="amaya V1.1 Beta">
</head>
<body lang="en">

<div id="head">
<p>
<a href="../../"><img border="0" alt="W3C" src="../../Icons/WWW/w3c_home">
</a> <a href="../"><img border="0" alt="Amaya" src="../Icons/amaya.gif"></a>
<a href="Manual.html"><img alt="Doc" border="0"
src="../Icons/doc48x.gif"></a></p>
</div>

<div id="Math">

<h2>Editing mathematics</h2>
<p>
Amaya allows you to include mathematical expressions in web pages, following
the <a href="http://www.w3.org/TR/WD-math/">Mathematical Markup Language</a>
(MathML) specification. Mathematical expressions are handled as structured
components, exactly in the same way as HTML elements. Therefore, you can
manipulate math expressions in the same way you manipulate other parts of HTML
documents. All editing commands provided by Amaya for handling text are also
available for math, and there are some additional controls to enter
mathematical constructs.</p>
<p>
<strong>Warning:</strong> In the current version of Amaya only <a
href="#Limitations">a subset of MathML is implemented</a>. The purpose of this
alpha version of the math extension is to show how MathML may improve
scientific communication over the Web. A more complete and more robust
implementation is planed for future releases.</p>

<h3>Creating a math expression</h3>

<h4>The Math palette and the Types/Math menu</h4>
<p>
To create a mathematical expression in a document, just <a
href="Selecting.html#Selecting">move the insertion point</a> (the caret) to
the position where you want to insert that expression, and click the
<strong>Math</strong> button (the rightmost button), or select the last entry
(Math) from the <strong>Types</strong> menu. The <strong>Math</strong> button
displays a palette that stays on the screen, the  <strong>Types</strong> menu
displays a popup menu. Just choose the most convenient tool. Both allow you to
select the mathematical construct to be inserted.</p>
<p>
In this palette or in the menu the first two items allow you to create a new
formula, when the caret is in some HTML element (but the caret should not be
within a MathML element):</p>
<ul>
<li>
The <strong>Math</strong> button (or the <strong>Inline math</strong> item)
creates an inline formula.
<li>
The <strong>MathDisp</strong> button (or the <strong>Equation</strong> item)
creates a display (block level) formula. If the caret is in a block element,
such as a paragraph or a heading, this block element is split and the new
formula is created between the two parts.
</ul>
<p>
The next items of the <strong>Math</strong> menu (or palette) allow you to
create new constructs within a formula. If the caret is not in a formula, a
<code>Math</code> element is created to accept the new construct. In this
version of Amaya, the available constructs are, from top to bottom:</p>
<ul>
<li>
Root with index, <code>MROOT</code> in MathML:  <math>
  <MROOT>
    <MROW>
      <MI>x</MI>
      <MO>+</MO>
      <MN>1</MN>
    </MROW>
    <MN>3</MN>
  </MROOT>
</math>

<li>
Square root, <code>MSQRT</code>: <math>
  <MSQRT>
    <MROW>
      <MI>x</MI>
      <MO>+</MO>
      <MN>1</MN>
    </MROW>
  </MSQRT>
</math>

<li>
Fraction, <code>MFRAC</code>: <math>
  <MFRAC>
    <MN>1</MN>
    <MROW>
      <MI>x</MI>
      <MO>+</MO>
      <MN>1</MN>
    </MROW>
  </MFRAC>
</math>

<li>
Expression with subscript and superscript, <code>MSUBSUP</code>: <math>
  <MSUBSUP>
    <MI>x</MI>
    <MROW>
      <MI>i</MI>
      <MO>+</MO>
      <MN>1</MN>
    </MROW>
    <MI>n</MI>
  </MSUBSUP>
</math>
or <math>
  <MSUBSUP>
    <MO>&int;</MO>
    <MN>0</MN>
    <MO>&infin;</MO>
  </MSUBSUP>
</math>

<li>
Expression with a subscript, <code>MSUB</code>: <math>
  <MSUB>
    <MI>x</MI>
    <MI>i</MI>
  </MSUB>
</math>

<li>
Expression with a superscript, <code>MSUP</code>: <math>
  <MSUP>
    <MI>x</MI>
    <MI>n</MI>
  </MSUP>
</math>

<li>
Expression with under- and overscript, <code>MUNDEROVER</code>: <math>
  <MUNDEROVER>
    <MO>&sum;</MO>
    <MROW>
      <MI>i</MI>
      <MO>=</MO>
      <MN>1</MN>
    </MROW>
    <MI>n</MI>
  </MUNDEROVER>
</math>

<li>
Expression with underscript, <code>MUNDER</code>: <math>
  <MUNDER>
    <MI>x</MI>
    <MO>-</MO>
  </MUNDER>
</math>

<li>
Expression with overscript, <code>MOVER</code>: <math>
  <MROW>
    <MI>x</MI>
    <MOVER>
      <MO>&rarr;</MO>
      <MTEXT>maps to</MTEXT>
    </MOVER>
    <MI>y</MI>
  </MROW>
</math>

<li>
Expression within parentheses, <code>MF</code>: <math>
  <MROW>
    <MF>(</MF>
    <MROW>
      <MI>a</MI>
      <MO>+</MO>
      <MI>b</MI>
    </MROW>
    <MF>)</MF>
  </MROW>
</math>

<li>
Expression with prescripts and tensor indices, <code>MMULTISCRIPTS</code>:
<math>
  <MMULTISCRIPTS>
    <MI>X</MI>
    <MI>i</MI>
    <MI>j</MI>
    <MPRESCRIPTS/>
    <MI>k</MI>
    <MI>l</MI>
  </MMULTISCRIPTS>
</math>

</ul>
<p>
The last item of the <strong>Math</strong> palette (<math>
  <MI>&alpha;&beta;&gamma;</MI>
</math>
) displays another palette from which you can insert symbols and greek
characters in mathematical expressions.</p>

<h4><a name="Entering">Entering constructs from the keyboard</a></h4>
<p>
You are not obliged to use a menu or a palette to create and edit mathematical
expressions. You can enter mathematical constructs directly from the keyboard,
as each item in the <strong>Math</strong> menu has a keyboard equivalent (see
the menu itself). This allows you to type faster. To type even faster, you may
also use the keyboard to move the caret from a construct to another, with the
arrow keys.</p>

<h3>Entering characters</h3>
<p>
When you type a character string in a MathML element, Amaya parses that string
and generates the <code>MO</code> (operator), <code>MN</code> (number),
<code>MI</code> (identifier), <code>MTEXT</code> elements automatically. For
instance, to enter</p>
<p>
<math>
  <MROW>
    <MI>x</MI>
    <MO>=</MO>
    <MN>2</MN>
    <MI>a</MI>
    <MO>+</MO>
    <MI>b</MI>
  </MROW>
</math>
</p>
<p>
just type <code>x=2a+b</code>, (don't forget to first click on the Math or
MathDisp item of the <strong>Math</strong> menu, if you are not in a
mathematical expression) and you will get the following structure (you can
check in the Math_Structure view):</p>
<pre>&lt;MI>x&lt;/MI>&lt;MO>=&lt;/MO>&lt;MN>2&lt;/MN>&lt;MI>a&lt;/MI>&lt;MO>+&lt;/MO>&lt;MI>b&lt;/MI></pre>

<h3>Structure editing</h3>
<p>
You may want to change the structure of an existing expression, e.g. appending
a superscript or puting parentheses around an expression. To do that, select
the expression and enter the new construct with the palette, the
<strong>Math</strong> menu or the <a href="#Entering">keyboard</a>.</p>
<p>
You can also use the <strong>Transform</strong> command from the
<strong>Special</strong> menu. Select the expression you want to transform and
the <strong>Transform</strong> command will display a menu with all possible
changes.</p>

<h3>Math_Structure view</h3>
<p>
Whenever a document contains some MathML elements, choosing the <a
href="Views.html#Structure">Show Structure</a> item from the
<strong>Views</strong> menu actually opens <em>two</em> views:</p>
<ul>
<li>
the Structure view shows the main structure of the HTML document. In this
view, MathML elements are only represented by a <code>MATH</code> or
<code>MATHDISP</code> tag; their actual contents is not shown.
<li>
the Math_Structure view shows only MathML elements, but here, all their
components are visible.
</ul>
<p>
You can edit math expressions either in the main view or in the Math_Structure
view. The Math_Structure view is especially helpful to avoid ambiguity.
Consider the following example:</p>
<mathdisp>
  <MROW>
    <MI>x</MI>
    <MO>=</MO>
    <MSQRT>
      <MROW>
        <MI>a</MI>
        <MO>+</MO>
        <MI>b</MI>
      </MROW>
    </MSQRT>
    <MO>+</MO>
    <MN>1</MN>
  </MROW>
</mathdisp>
<p>
When moving the caret after character <em>b</em>, it is not clear whether you
want to add something <em>within</em> the square root or <em>after</em> it.
Selecting (or checking) in the Math_Structure view avoids any ambiguity.</p>

<h3 id="Limitations">Current limitations</h3>
<p>
The current version of Amaya only implements the <em>Presentation Tags</em>
from MathML, not the <em>Content Markup</em>. All presentation elements are
available, except tables and matrices (<code>MTABLE</code>, <code>MTR</code>,
<code>MTD</code>). MathML attributes are not implemented (except
<code>fontslant</code> which is available in the <strong>Attributes</strong>
menu when a <code>MI</code> element is selected), but the <code>class</code>
and <code>style</code> attributes from HTML are available: you can <a
href="StyleSheets.html">associate CSS style</a> with MathML elements.</p>
<p>
</p>
<hr>
</div>
</body>
</html>
