<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<title>
Editing mathematics</title>
<meta name="GENERATOR" content="amaya V1.1 Beta">
</head>
<body lang="en">

<div id="head">
<p>
<a href="../../"><img border="0" alt="W3C" src="../../Icons/WWW/w3c_home">
</a> <a href="../"><img border="0" alt="Amaya" src="../Icons/amaya.gif"></a> <a
href="Manual.html"><img alt="Doc" border="0" src="../Icons/doc48x.gif"></a></p>
</div>

<div id="Math">

<h2>Editing mathematics</h2>
<p>
Amaya allows you to include mathematical expressions in web pages, following
the <a href="http://www.w3.org/TR/WD-math/">Mathematical Markup Language</a>
(MathML) specification. Mathematical expressions are handled as structured
components, exactly in the same way as HTML structures. Therefore, you can
manipulate math expressions in the same way you manipulate the rest of HTML
documents. All editing commands provided by Amaya for handling text are also
available for math, and there are some additional controls to enter
mathematical constructs.</p>
<p>
<strong>Warning:</strong> In the current version of Amaya only <a
href="#Limitations">a part of MathML is implemented</a>. The purpose of this
alpha version of the math extension is to show how MathML may improve
scientific communication over the Web. A more complete and more robust
implementation is planed for future releases.</p>

<h3>Creating a math expression</h3>
<p>
To create a math expression in a document, move the insertion point to the
position where you want to insert that expression, and click the
<strong>Math</strong> button (the rightmost button). It displays a menu that
allows you to choose the mathematical construct to be inserted.</p>
<p>
The first two items of this menu (Math and MathDisp) allow you to create a new
formula, when the caret is in some HTML element (but the caret should not be
within a MathML element):</p>
<ul>
<li>
The <strong>Math</strong> button creates an inline formula. 
<li>
The <strong>MathDisp</strong> button creates a display (block level) formula.
If the caret is in a block element, such as a paragraph or a heading, this
block element is split and the new formula is created between the two parts. 
</ul>
<p>
The next items of the <strong>Math</strong> menu allow you to create new
constructs within a formula. If the caret is not in a formula, a
<code>Math</code> element is created to accept the new construct. In this
version of Amaya, the available constructs are, from top to bottom:</p>
<ul>
<li>
Root with index, <code>MROOT</code> in MathML:  <math>
  <mroot>
    <mrow>
      <mi>x</mi>
      <mo>+</mo>
      <mn>1</mn>
    </mrow>
    <mn>3</mn>
  </mroot>
</math>

<li>
Square root, <code>MSQRT</code>: <math>
  <msqrt>
    <mrow>
      <mi>x</mi>
      <mo>+</mo>
      <mn>1</mn>
    </mrow>
  </msqrt>
</math>

<li>
Fraction, <code>MFRAC</code>: <math>
  <mfrac>
    <mn>1</mn>
    <mrow>
      <mi>x</mi>
      <mo>+</mo>
      <mn>1</mn>
    </mrow>
  </mfrac>
</math>

<li>
Expression with subscript and superscript, <code>MSUBSUP</code>: <math>
  <msubsup>
    <mi>x</mi>
    <mrow>
      <mi>i</mi>
      <mo>+</mo>
      <mn>1</mn>
    </mrow>
    <mi>n</mi>
  </msubsup>
</math>
or <math>
  <msubsup>
    <mo>&int;</mo>
    <mn>0</mn>
    <mo>&infin;</mo>
  </msubsup>
</math>

<li>
Expression with a superscript, <code>MSUP</code>: <math>
  <msup>
    <mi>x</mi>
    <mi>n</mi>
  </msup>
</math>

<li>
Expression with a subscript, <code>MSUB</code>: <math>
  <msub>
    <mi>x</mi>
    <mi>i</mi>
  </msub>
</math>

<li>
Expression with under- and overscript, <code>MUNDEROVER</code>: <math>
  <munderover>
    <mo>&sum;</mo>
    <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mn>1</mn>
    </mrow>
    <mi>n</mi>
  </munderover>
</math>

<li>
Expression with overscript, <code>MOVER</code>: <math>
  <mrow>
    <mi>x</mi>
    <mover>
      <mo>&rarr;</mo>
      <mtext>maps to</mtext>
    </mover>
    <mi>y</mi>
  </mrow>
</math>

<li>
Expression with underscript, <code>MUNDER</code>: <math>
  <munder>
    <mi>x</mi>
    <mo>-</mo>
  </munder>
</math>

<li>
Expression within parentheses, <code>MF</code>: <math>
  <mrow>
    <mf>(</mf>
    <mrow>
      <mi>a</mi>
      <mo>+</mo>
      <mi>b</mi>
    </mrow>
    <mf>)</mf>
  </mrow>
</math>

<li>
Expression with prescripts and tensor indices, <code>MMULTISCRIPTS</code>:
<math>
  <mmultiscripts>
    <mi>X</mi>
    <mi>i</mi>
    <mi>j</mi>
    <mprescripts/>
    <mi>k</mi>
    <mi>l</mi>
  </mmultiscripts>
</math>

</ul>
<p>
The last item of the <strong>Math</strong> menu (<math>
  <mi>&alpha;&beta;&gamma;</mi>
</math>
) displays a palette from which you can insert symbols and greek characters in
mathematical expressions.</p>

<h3>Math_Structure view</h3>
<p>
Whenever a document contains some MathML elements, choosing the <a
href="Views.html#Structure">Show Structure</a> item from the
<strong>Views</strong> menu actually opens <em>two</em> views:</p>
<ul>
<li>
the Structure view shows the main structure of the HTML document. In this
view, MathML elements are only represented by a <code>MATH</code> or
<code>MATHDISP</code> tag; their actual contents is not shown. 
<li>
the Math_Structure view shows only MathML elements, but here, all their
components are visible. 
</ul>
<p>
You can edit math expressions either in the main view or in the Math_Structure
view. The Math_Structure view is specially helpful to avoid ambiguity.
Consider the following example:</p>
<mathdisp>
  <mrow>
    <mi>x</mi>
    <mo>=</mo>
    <msqrt>
      <mrow>
        <mi>a</mi>
        <mo>+</mo>
        <mi>b</mi>
      </mrow>
    </msqrt>
    <mo>+</mo>
    <mn>1</mn>
  </mrow>
</mathdisp>
<p>
When moving the caret after character <em>b</em>, it is not clear whether you
want to add something <em>within</em> the square root or <em>after</em> it.
Selecting (or checking) in the Math_Structure view avoids any ambiguity.</p>

<h3>Editing math elements</h3>
<p>
To edit math elements, just <a href="Selecting.html#Selecting">move the
insertion point</a> (the caret) to the desired position, with the mouse or
with the arrow keys, and type some characters or select a construct from the
<strong>Math</strong> menu.</p>
<p>
When you type a character string in a MathML element, Amaya parses that string
and generates the <code>MO</code> (operator), <code>MN</code> (number),
<code>MI</code> (identifier), <code>MTEXT</code> elements automatically. For
instance, to enter</p>
<p>
<math>
  <mrow>
    <mi>x</mi>
    <mo>=</mo>
    <mn>2</mn>
    <mi>a</mi>
    <mo>+</mo>
    <mi>b</mi>
  </mrow>
</math>
</p>
<p>
just type <code>x=2a+b</code>, (don't forget to first click on the Math or
MathDisp item of the <strong>Math</strong> menu, if you are not in a
mathematical expression) and you will get the following structure (you can
check in the Math_Structure view):</p>
<pre>&lt;MI>x&lt;/MI>&lt;MO>=&lt;/MO>&lt;MN>2&lt;/MN>&lt;MI>a&lt;/MI>&lt;MO>+&lt;/MO>&lt;MI>b&lt;/MI></pre>

<h3 id="Limitations">Current limitations</h3>
<p>
The current version of Amaya only implements the <em>Presentation Tags</em>
from MathML, not the <em>Content Markup</em>. All presentation elements are
available, except tables and matrices (<code>MTABLE</code>, <code>MTR</code>,
<code>MTD</code>). MathML attributes are not implemented (except
<code>fontslant</code> which is available in the <strong>Attributes</strong>
menu when a <code>MI</code> element is selected), but the <code>class</code>
and <code>style</code> attributes from HTML are available: you can <a
href="StyleSheets.html">associate CSS style</a> to MathML elements.</p>
<p>
</p>
<hr>
</div>
</body>
</html>
