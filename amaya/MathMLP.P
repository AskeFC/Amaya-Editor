	{ Presentation Schema de structure for MathML.

	  I. Vatton			June 1997	}


PRESENTATION MathML;
VIEWS
   Formatted_view, Math_Structure_view;

#define STRUCT_INDENT 1.5
#define TAG_FONTSIZE 10 pt
#define DOC_FONTSIZE 12 pt
#define TAG_Style Bold
#define TAG_Visibility 7

#ifdef BLACK_WHITE
#define TAG_Color Black
#define ATTR_Color Black
#define ATTRVALUE_Color Black
#define INVALID_Color Black
#define UNKNOWNTAG_Color Black
#else
#define TAG_Color Blue
#define ATTR_Color Blue
#define ATTRVALUE_Color Black
#define INVALID_Color Red
#define UNKNOWNTAG_Color Red
#define LINK_Color DarkIndigo1
#define TARGET_Color DarkGreen2
#endif

#define TAG_Font Helvetica
#define ATTR_Style Bold
#define ATTR_Style_Links_view Italics
#define ATTR_Visibility 6
#define INPUT_Font Courier
#define COMMENT_Visibility 5
#define COMMENT_Font Helvetica
#define COMMENT_Style Italics
#define INVALID_Style Bold
#define INVALID_Visibility 5
#define INVALID_Font Helvetica
#define TableSimpleHSpace 4 pt
#define TableDoubleHSpace 8 pt
#define TableSimpleVSpace 0.4
#define VSpaceBeforeH1 1
#define VSpaceBeforeH2 0.5
#define VSpaceBeforeH3 0.5
#define VSpaceBeforeH4 0.5
#define VSpaceBeforeH5 0.5
#define VSpaceBeforeH6 0.5
#define VSpaceInToC 0.2

DEFAULT

   BEGIN
   Visibility: Enclosing = ;
   VertRef: * . Left ;
   HorizRef: Enclosed . HRef ;
   Height: Enclosed . Height;
   Width: Enclosed  . Width;
   VertPos: HRef = Previous . Href;
   HorizPos: Left = Previous . Right;
   LineBreak: No;
   Font: Enclosing =;
   Style: Enclosing =;
   Size: Enclosing = ;
   Indent: 0;
   Justify: No;
   Adjust: Left;
   LineSpacing: 1;
   Depth : 0;
   UnderLine: Enclosing =;
   Thickness: Enclosing =;
   LineStyle: Enclosing =;
   LineWeight: Enclosing =;
   Background: Enclosing =;
   Foreground: Enclosing =;
   FillPattern: Enclosing =;
   END;

BOXES

 MROW_S: BEGIN
	Content: Text 'MROW';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Enclosing . Top + 0.5;
		Size: TAG_FONTSIZE;
		Font: TAG_Font;
		Style: TAG_Style;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 MROOT_S: BEGIN
	Content: Text 'MROOT';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Enclosing . Top + 0.5;
		Size: TAG_FONTSIZE;
		Font: TAG_Font;
		Style: TAG_Style;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 MSQRT_S: BEGIN
	Content: Text 'MSQRT';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Enclosing . Top + 0.5;
		Size: TAG_FONTSIZE;
		Font: TAG_Font;
		Style: TAG_Style;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 MFRAC_S: BEGIN
	Content: Text 'MFRAC';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Enclosing . Top + 0.5;
		Size: TAG_FONTSIZE;
		Font: TAG_Font;
		Style: TAG_Style;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 MSUBSUP_S: BEGIN
	Content: Text 'MSUBSUP';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Enclosing . Top + 0.5;
		Size: TAG_FONTSIZE;
		Font: TAG_Font;
		Style: TAG_Style;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 MSUB_S: BEGIN
	Content: Text 'MSUB';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Enclosing . Top + 0.5;
		Size: TAG_FONTSIZE;
		Font: TAG_Font;
		Style: TAG_Style;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 MSUP_S: BEGIN
	Content: Text 'MSUP';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Enclosing . Top + 0.5;
		Size: TAG_FONTSIZE;
		Font: TAG_Font;
		Style: TAG_Style;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 MFENCE_S: BEGIN
	Content: Text 'MFENCE';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Enclosing . Top + 0.5;
		Size: TAG_FONTSIZE;
		Font: TAG_Font;
		Style: TAG_Style;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 MI_S: BEGIN
	Content: Text 'MI';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Enclosing . Top + 0.5;
		Size: TAG_FONTSIZE;
		Font: TAG_Font;
		Style: TAG_Style;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 MO_S: BEGIN
	Content: Text 'MO';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Enclosing . Top + 0.5;
		Size: TAG_FONTSIZE;
		Font: TAG_Font;
		Style: TAG_Style;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 MN_S: BEGIN
	Content: Text 'MN';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Enclosing . Top + 0.5;
		Size: TAG_FONTSIZE;
		Font: TAG_Font;
		Style: TAG_Style;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 MS_S: BEGIN
	Content: Text 'MS';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Enclosing . Top + 0.5;
		Size: TAG_FONTSIZE;
		Font: TAG_Font;
		Style: TAG_Style;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 MTEXT_S: BEGIN
	Content: Text 'MTEXT';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Enclosing . Top + 0.5;
		Size: TAG_FONTSIZE;
		Font: TAG_Font;
		Style: TAG_Style;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 VerticalLine: BEGIN
	Content: Graphics 'W';
	Visibility: 0;
	IN Math_Structure_view BEGIN
		VertPos: Top = Creator . Top;
		Height: Creator . Height;
		Width: 1.1;
		LineWeight: 2 pt;
		Visibility: TAG_Visibility;  Foreground: TAG_Color;
		END;
	END;

 Bar:	{ fraction bar }
	BEGIN
	LineWeight: 1 pt;
	Height: 0.2;
        Width: Enclosing . Width ;
	HorizPos: Left = Enclosing . Left;
	Content: Graphics 'h';	{ horizontal bar }
	LineStyle: Solid;
	END;

 SymbRadical:
	BEGIN
	Height: Enclosing . Height;
	Width: Enclosing . Width;
	VertPos: Top = Enclosing . Top;
	HorizPos: Left = Enclosing . Left;
	Content: Symbol 'r';		{ root symbol }
	Depth: Enclosing + 1;
	END;

RULES

   MathML:
	BEGIN
	PageBreak: No;
	LineBreak: Yes;
	LineWeight: 1 pt;
	VertPos: Top = Previous . Bottom;
	HorizPos: VMiddle = Previous . VMiddle;
	IN Math_Structure_view
		Visibility: 8;
	END;

   MROW:
	BEGIN
	CreateFirst(MROW_S);
	IN Math_Structure_view BEGIN
		Size: DOC_FONTSIZE;
		Width: Enclosing . Width - 1;
		Height: Enclosed . Height;
		HorizPos: Left = Enclosing . Left + 1;
		Font: Helvetica;
		END;
  	END;

   MROOT:
        BEGIN
	CreateFirst(SymbRadical);
	HorizRef: Enclosed Root_exp . HRef ;
	Gather: Yes;
	CreateFirst(MROOT_S);
	IN Math_Structure_view BEGIN
		Size: DOC_FONTSIZE;
		Width: Enclosing . Width - 1;
		Height: Enclosed . Height;
		HorizPos: Left = Enclosing . Left + 1;
		Font: Helvetica;
		END;
  	END;

   MSQRT:
        BEGIN
	CreateFirst(SymbRadical);
	HorizRef: Enclosed Root_exp . HRef ;
	Gather: Yes;
	CreateFirst(MSQRT_S);
	IN Math_Structure_view BEGIN
		Size: DOC_FONTSIZE;
		Width: Enclosing . Width - 1;
		Height: Enclosed . Height;
		HorizPos: Left = Enclosing . Left + 1;
		Font: Helvetica;
		END;
  	END;

   Root_index:
   	BEGIN
	HorizRef: * . Top;
   	HorizPos: Left = Enclosing.Left;
   	VertPos: Top = Enclosing.Top;
   	Size: Enclosing -2 min 0;
	IN Math_Structure_view BEGIN
		Width: Enclosing . Width;
		Height: Enclosed . Height;
		END;
   	END;
	
   Root_exp:	
        BEGIN
	HorizPos: Left = Enclosing . Left + 1;
	VertPos: Top = Enclosing . Top + 0.1;
	IN Math_Structure_view BEGIN
		Width: Enclosing . Width;
		Height: Enclosed . Height;
		END;
  	END;

   MFRAC:
	BEGIN
	CreateFirst(Bar);
	HorizRef: Enclosed Bar . Bottom + 0.1;
	Gather: Yes;
	CreateFirst(MFRAC_S);
	IN Math_Structure_view BEGIN
		Size: DOC_FONTSIZE;
		Width: Enclosing . Width - 1;
		Height: Enclosed . Height;
		HorizPos: Left = Enclosing . Left + 1;
		Font: Helvetica;
		END;
	END;

   Numerator:
	BEGIN
	HorizRef: * . Top;
	VertPos: Bottom = Bar . Top;
	HorizPos: VMiddle = Bar . VMiddle;
	IN Math_Structure_view BEGIN
		Width: Enclosing . Width;
		Height: Enclosed . Height;
		END;
	END;

   Denominator:
        BEGIN
	HorizRef: * . Top;
	HorizPos: VMiddle = Bar . VMiddle;
	VertPos: Top = Bar . Bottom + 0.2;
	IN Math_Structure_view BEGIN
		Width: Enclosing . Width;
		Height: Enclosed . Height;
		END;
	END;

   MSUBSUP:
        BEGIN
	Gather: Yes;
	HorizRef: Enclosed  Base. HRef;
	CreateFirst(MSUBSUP_S);
	IN Math_Structure_view BEGIN
		Size: DOC_FONTSIZE;
		Width: Enclosing . Width - 1;
		Height: Enclosed . Height;
		HorizPos: Left = Enclosing . Left + 1;
		Font: Helvetica;
		END;
	END;

   MSUB:
        BEGIN
	Gather: Yes;
	HorizRef: Enclosed  Base. HRef;
	CreateFirst(MSUB_S);
	IN Math_Structure_view BEGIN
		Size: DOC_FONTSIZE;
		Width: Enclosing . Width - 1;
		Height: Enclosed . Height;
		HorizPos: Left = Enclosing . Left + 1;
		Font: Helvetica;
		END;
	END;

   MSUP:
        BEGIN
	Gather: Yes;
	HorizRef: Enclosed  Base. HRef;
	CreateFirst(MSUP_S);
	IN Math_Structure_view BEGIN
		Size: DOC_FONTSIZE;
		Width: Enclosing . Width - 1;
		Height: Enclosed . Height;
		HorizPos: Left = Enclosing . Left + 1;
		Font: Helvetica;
		END;
	END;

   Base:
	BEGIN
	VertPos: NIL;
	HorizPos: Left = Enclosing . Left;
	IN Math_Structure_view BEGIN
		Width: Enclosing . Width;
		Height: Enclosed . Height;
		END;
	END;

   Sup_exp:
	BEGIN
	Size: Enclosing-2 min 0;
	HorizRef: * . Top;
	HorizPos: Left = Base . Right;
	VertPos: Bottom = Base . Top + 0.5;
	IN Math_Structure_view BEGIN
		Width: Enclosing . Width;
		Height: Enclosed . Height;
		END;
	END;

   Sub_exp:
	BEGIN
	Size: Enclosing-2 min 0;
	HorizRef: * . Top;
	HorizPos: Left = Base . Right;
	VertPos: Top = Base . Bottom - 0.5;
	IN Math_Structure_view BEGIN
		Width: Enclosing . Width;
		Height: Enclosed . Height;
		END;
	END;

   MFENCE:
	BEGIN
	HorizRef: * . Top;
	Height: Enclosing . Height;
	HorizPos: Left = Enclosing . Left + 0.1;
	VertPos: Top =  Enclosing . Top;
	CreateFirst(MFENCE_S);
	IN Math_Structure_view BEGIN
		Size: DOC_FONTSIZE;
		Width: Enclosing . Width - 1;
		Height: Enclosed . Height;
		HorizPos: Left = Enclosing . Left + 1;
		Font: Helvetica;
		END;
	END;

   MI:
	BEGIN
	CreateFirst(MI_S);
	Style: Italics;
	IN Math_Structure_view BEGIN
		Size: DOC_FONTSIZE;
		Width: Enclosing . Width - 1;
		Height: Enclosed . Height;
		HorizPos: Left = Enclosing . Left + 1;
		Font: Helvetica;
		Style: Enclosing =;
		END;
	END;

   MO:
	BEGIN
	CreateFirst(MO_S);
	IN Math_Structure_view BEGIN
		Size: DOC_FONTSIZE;
		Width: Enclosing . Width - 1;
		Height: Enclosed . Height;
		HorizPos: Left = Enclosing . Left + 1;
		Font: Helvetica;
		END;
	END;

   MN:
	BEGIN
	CreateFirst(MN_S);
	IN Math_Structure_view BEGIN
		Size: DOC_FONTSIZE;
		Width: Enclosing . Width - 1;
		Height: Enclosed . Height;
		HorizPos: Left = Enclosing . Left + 1;
		Font: Helvetica;
		END;
	END;

   MS:
	BEGIN
	CreateFirst(MS_S);
	IN Math_Structure_view BEGIN
		Size: DOC_FONTSIZE;
		Width: Enclosing . Width - 1;
		Height: Enclosed . Height;
		HorizPos: Left = Enclosing . Left + 1;
		Font: Helvetica;
		END;
	END;

   MTEXT:
	BEGIN
	CreateFirst(MTEXT_S);
	IN Math_Structure_view BEGIN
		Size: DOC_FONTSIZE;
		Width: Enclosing . Width - 1;
		Height: Enclosed . Height;
		HorizPos: Left = Enclosing . Left + 1;
		Font: Helvetica;
		END;
	END;

   SYMBOL_UNIT:
	BEGIN
	Height: Enclosing . Height;
	Width: Enclosing . Width;
	VertPos: Nil;
	HorizPos: Nil;
	END;

   TEXT_UNIT:
	BEGIN
	VertRef: Enclosed . VRef;
	LineBreak: Yes;
	END;

END
